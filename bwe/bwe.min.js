class Bwe{constructor(data){if(data.constructor!==Array)
this.data=[data];else this.data=data}
render(sel,type){let el;if(sel.constructor!==String)
el=sel;else el=Bwe.sel(sel);for(let i in this.data){Bwe.addEl(el,this.data[i],type)}}}
class Element{constructor(el){this.el=el}
attr(key){return this.el.getAttribute(key)}
text(){return this.el.textContent}
elData(){let wrap=document.createElement('div');wrap.appendChild(this.el.cloneNode(!0));return Bwe.makeData(wrap.innerHTML)}
del(){this.el.remove()}
html(json,type){if(type===undefined)
type="set";new Bwe(json).render(this.el,type)}}
Bwe.getEl=function(str,type){return new Element(Bwe.sel(str))}
Bwe.addEl=function(s,d,type){if(s===undefined){return}
let el=document.createElement(d.tag);if(d.con!==undefined){let c=document.createTextNode(d.con);el.appendChild(c)}
for(let key in d){if(key!=="con"&&key!=="data"&&key!=="tag"&&key!=="children"){el.setAttribute(key,d[key])}
else if(key==="data"){for(let i in d.data){el.setAttribute("data-"+i,d.data[i])}}}
if(type==="prepend"){let first=s.firstElementChild;if(first!==undefined){let tmp=s.innerHTML;s.innerHTML="";s.appendChild(el);s.innerHTML+=tmp}
else{s.appendChild(el)}}
else{if(type==="set"){s.innerHTML=""}
s.appendChild(el)}
if(d.children!==undefined){for(var i=0;i<d.children.length;i++){Bwe.addEl(el,d.children[i])}}}
Bwe.sel=function(str){let ch=str.charAt(0);if(ch==="."){let els=document.getElementsByClassName(str.substr(1,str.length-1));if(els.length>0)
return els[0]}
else if(ch==="#"){return document.getElementById(str.substr(1,str.length-1))}
else if(str==="html"){return document.documentElement}
else if(str==="body"){return document.body}
else{let els=document.getElementsByTagName(str);if(els.length>0)
return els[0]}}
Bwe.each=function(str,callback){let els;if(sel.charAt(0)==="."){els=document.getElementsByClassName(str.substr(1,str.length-1))}
else{els=document.getElementsByTagName(str)}
if(els.length>0){for(let i in els){callback(els[i])}}}
Bwe.build=function(tags){if(tags.constructor!==Array){var tags=[tags]}
let res="";for(let tag in tags){let kv=tags[tag];res+="<"+kv.tag;for(var i in Bwe.identifiers){var key=Bwe.identifiers[i];if(kv[key]!=undefined&&key!=="data"){res+=" "+key+"='"+kv[key]+"'"}}
for(var i in Bwe.idendifiersNoVal){var key=Bwe.idendifiersNoVal[i];if(kv[key]!=undefined){res+=" "+key}}
if(kv.data!=undefined){for(var key in kv.data){res+=" data-"+key+"='"+kv.data[key]+"'"}}
var requiresClosingTag=$.inArray(kv.tag,Bwe.noClosingTag);if(requiresClosingTag!=-1){res+=">"}
else{res+=">"}
if(kv.con!=undefined){res+=kv.con}
for(var i in kv.children){res+=Bwe.build(kv.children[i])}
if(requiresClosingTag==-1){res+="</"+kv.tag+">\n"}}
return res}
Bwe.makeData=function(html){var start=0;var openQuote=!1;var openSingleQuote=!1;var openDoubleQuote=!1;var isClosing=!1;let readContent=!1;var attr="";var ch;var attrs=[];var tags=[];var activeParentIndex=-1;var childDepth=-1;var childIndexes=[];let content="";for(var i=0;i<html.length;i++){var ch=html.charAt(i);if(ch==="<"){start=i;if(html.charAt(i+1)==="/"){isClosing=!0;tags[tags.length-1].con=content
content="";readContent=!1}}
else if(ch===">"){if(attr!==""){attrs.push(attr);attr=""}
var json=Bwe.makeFromAttrs(attrs);attrs=[];if(!isClosing){readContent=!0;childDepth+=1;if(childDepth==0){tags.push(json);activeParentIndex+=1}
else{if(childIndexes.length<=childDepth){childIndexes.push(0)}
else{childIndexes[childDepth]+=1}
var parent=tags[activeParentIndex];for(var c=0;c<childDepth-1;c++){var index=childIndexes[c];if(!("children" in parent)){parent.children=[]}
parent=parent.children[index]}
if(!parent.hasOwnProperty("children")){parent.children=[]}
parent.children.push(json);if($.inArray(json.tag,Bwe.noClosingTag)==!1){childIndexes[childDepth]=-1;childDepth-=1;childIndexes[childDepth]+=1;isClosing=!1}}}
else{childIndexes[childDepth]=-1;childDepth-=1;childIndexes[childDepth]+=1;isClosing=!1}}
else if(readContent){content+=ch}
else if(ch=="\'"){openSingleQuote=!openSingleQuote
if(openDoubleQuote==!1&&openSingleQuote==!0){openQuote=!0}
else if(openSingleQuote==!1){openQuote=!1}}
else if(ch=="\""){openDoubleQuote=!openDoubleQuote;if(openDoubleQuote==!0&&openSingleQuote==!1){openQuote=!0}
else if(openDoubleQuote==!1){openQuote=!1}}
else if(!isClosing){if(openQuote==!1&&((ch==' ')||(ch=='\t')||(ch=='\n'))){if(attr!==""){attrs.push(attr);attr=""}}
else{attr+=ch}}}
return tags}
Bwe.makeFromAttrs=function(attrs){var json={tag:attrs[0]};for(var i=1;i<attrs.length;i++){if(attrs[i].indexOf("=")>-1){var els=attrs[i].split("=");if(els[0].indexOf("data-")>-1){let key=els[0].replace("data-","");if(json.data===undefined){json.data={}}
json.data[key]=els[1]}
else{json[els[0]]=els[1].replace(/"/g,"")}}
else if(Bwe.idendifiersNoVal.indexOf(attrs[i])>-1){json[attrs[i]]=""}
else{if(!json.hasOwnProperty("con")){json.con=""}
json.con+=attrs[i]}}
return json}
Bwe.identifiers=["accept","accept-charset","accesskey","action","alt","autocomplete","charset","cite","class","cols","colspan","content","contenteditable","coords","data","dir","dirname","draggable","enctype","for","form","formaction","headers","height","href","hreflang","http-equiv","id","kind","label","lang","list","low","max","maxlength","media","method","min","name","onabort","onbeforeunload","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","oncopy","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onended","onerror","onfocus","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onpageshow","onpaste","onpause","onplay","onplaying","onprogress","onratechange","onreset","onresize","onscroll","onseeked","onseeking","onselect","onsubmit","ontimeupdate","onunload","onvolumechange","onwaiting","optimum","pattern","placeholder","poster","preload","rel","rows","rowspan","shape","size","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","tabindex","target","title","type","usemap","value","width","wrap"];Bwe.idendifiersNoVal=["async","autofocus","autoplay","checked","controls","default","defer","disabled","download","hidden","high","ismap","loop","multiple","muted","novalidate","readonly","required","reversed","sandbox"];Bwe.noClosingTag=["img","source","br","hr","area","track","link","col","meta","base","embed","param","input"];Bwe.pages=[]
