class Comp{constructor(data){this.data=data}
addChild(child,sel,before){if(this.data.children===undefined){this.data.children=[]}
switch(sel){case undefined:this.data.children.push(child);break;case "first":this.data.children.splice(0,0,child);break;default:let ch=sel.charAt(0);let str=sel.substr(1);let key;let isData=!1;switch(ch){case "#":key="id";break;case ".":key="class";break;default:let a=sel.split(":");key=a[0];str=a[1];isData=!0;break}
for(let i=0;i<this.data.children.length;i++){let c;if(!isData){c=this.data.children[i]}
else{c=this.data.children[i].data}
if(c!=undefined&&c[key]!==undefined&&c[key]===str){if(!before)i++;this.data.children.splice(i,0,child);return}}
this.data.children.push(child)}}
clone(){return new Comp(Bwe.clone(this.data))}
render(sel,type){let el;if(sel.constructor!==String)
el=sel;else el=Bwe.sel(sel);Bwe.addEl(el,this.data,type)}}
class Element{constructor(el){this.el=el}
attr(key,val){if(val!==undefined){this.el.setAttribute(key,val);return null}
return this.el.getAttribute(key)}
prop(key,val){if(val===undefined){return this.el[key]}
else this.el[key]=val}
scrollTo(){window.scrollTo(0,this.el.offsetTop)}
visible(show){let v=this.el.style.visibility;if(show===undefined){return(v===""||v==="visible")}
else{if(show){this.el.style.visibility="visible"}
else{this.el.style.visibility="hidden"}}}
data(key,val){return this.attr("data-"+key,val)}
text(){return this.el.textContent}
elData(){let wrap=document.createElement(asdasdasdasd'div');wrap.appendChild(this.el.cloneNode(!0));return Bwe.makeData(wrap.innerHTML)}
del(){this.el.remove()}
addClass(){console.log(this.el.className)}
html(json,type){if(type===undefined)
type="set";new Bwe(json).render(this.el,type)}}
class Bwe{static getEl(str,type){return new Element(Bwe.sel(str))}
static addEl(s,d,type){if(s===undefined){return}
let el=document.createElement(d.tag);if(d.txt!==undefined){let c=document.createTextNode(d.txt);el.appendChild(c)}
for(let key in d){if(key!=="txt"&&key!=="data"&&key!=="tag"&&key!=="children"&&key!="on"){el.setAttribute(key,d[key])}
else if(key==="data"){for(let i in d.data){el.setAttribute("data-"+i,d.data[i])}}
else if(key==="on"){for(let evnt in d[key]){el.addEventListener(evnt,d[key][evnt])}}}
if(type==="prepend"){let first=s.firstElementChild;if(first!==undefined){let tmp=s.innerHTML;s.innerHTML="";s.appendChild(el);s.innerHTML+=tmp}
else{s.appendChild(el)}}
else{if(type==="set"){s.innerHTML=""}
s.appendChild(el)}
if(d.children!==undefined){for(var i=0;i<d.children.length;i++){Bwe.addEl(el,d.children[i])}}}
static sel(str){let ch=str.charAt(0);if(ch==="."){let els=document.getElementsByClassName(str.substr(1,str.length-1));if(els.length>0)
return els[0]}
else if(ch==="#"){return document.getElementById(str.substr(1,str.length-1))}
else if(str==="html"){return document.documentElement}
else if(str==="body"){return document.body}
else{let els=document.getElementsByTagName(str);if(els.length>0)
return els[0]}}
static each(str,callback){let els;if(str.charAt(0)==="."){els=document.getElementsByClassName(str.substr(1,str.length-1))}
else{els=document.getElementsByTagName(str)}
if(els.length>0){for(let i=0;i<els.length;i++){callback(new Element(els[i]))}}}
static makeData(html){var start=0;var openQuote=!1;var openSingleQuote=!1;var openDoubleQuote=!1;var isClosing=!1;let readContent=!1;var attr="";var ch;var attrs=[];var tags=[];var activeParentIndex=-1;var childDepth=-1;var childIndexes=[];let content="";for(var i=0;i<html.length;i++){var ch=html.charAt(i);if(ch==="<"){start=i;if(html.charAt(i+1)==="/"){isClosing=!0;tags[tags.length-1].txt=content
content="";readContent=!1}}
else if(ch===">"){if(attr!==""){attrs.push(attr);attr=""}
var json=Bwe.makeFromAttrs(attrs);attrs=[];if(!isClosing){readContent=!0;childDepth+=1;if(childDepth==0){tags.push(json);activeParentIndex+=1}
else{if(childIndexes.length<=childDepth){childIndexes.push(0)}
else{childIndexes[childDepth]+=1}
var parent=tags[activeParentIndex];for(var c=0;c<childDepth-1;c++){var index=childIndexes[c];if(!("children" in parent)){parent.children=[]}
parent=parent.children[index]}
if(!parent.hasOwnProperty("children")){parent.children=[]}
parent.children.push(json);if($.inArray(json.tag,Bwe.noClosingTag)==!1){childIndexes[childDepth]=-1;childDepth-=1;childIndexes[childDepth]+=1;isClosing=!1}}}
else{childIndexes[childDepth]=-1;childDepth-=1;childIndexes[childDepth]+=1;isClosing=!1}}
else if(readContent){content+=ch}
else if(ch=="\'"){openSingleQuote=!openSingleQuote
if(openDoubleQuote==!1&&openSingleQuote==!0){openQuote=!0}
else if(openSingleQuote==!1){openQuote=!1}}
else if(ch=="\""){openDoubleQuote=!openDoubleQuote;if(openDoubleQuote==!0&&openSingleQuote==!1){openQuote=!0}
else if(openDoubleQuote==!1){openQuote=!1}}
else if(!isClosing){if(openQuote==!1&&((ch==' ')||(ch=='\t')||(ch=='\n'))){if(attr!==""){attrs.push(attr);attr=""}}
else{attr+=ch}}}
return tags}
static makeFromAttrs(attrs){var json={tag:attrs[0]};for(var i=1;i<attrs.length;i++){if(attrs[i].indexOf("=")>-1){var els=attrs[i].split("=");if(els[0].indexOf("data-")>-1){let key=els[0].replace("data-","");if(json.data===undefined){json.data={}}
json.data[key]=els[1]}
else{json[els[0]]=els[1].replace(/"/g,"")}}
else if(Bwe.idendifiersNoVal.indexOf(attrs[i])>-1){json[attrs[i]]=""}
else{if(!json.hasOwnProperty("txt")){json.txt=""}
json.txt+=attrs[i]}}
return json}
static genList(items){let list=[];for(let i in items){list.push({tag:"li",txt:items[i]})}
return list}
static genTable(headings,rows){let table=[];if(headings.length>0){let headingData={tag:"tr",children:[]}
for(let h in headings){headingData.children.push({tag:"th",txt:headings[h]})}
table.push(headingData)}
for(let r=0;r<rows.length;r++){let rowData={tag:"tr",children:[]};for(let i in rows[r]){rowData.children.push({tag:"td",txt:rows[r][i]})}
table.push(rowData)}
return table}
static clone(data){let json={};for(let key in data){if(key==="children"){json[key]=[];for(let child in data[key]){json[key].push(Bwe.clone(data[key][child]))}}
else if(key==="on"){json[key]=[];for(let evnt in data[key]){json[key].push(data[key][evnt])}}
else{json[key]=data[key]}}
return json}
static scrollable(enabled){if(enabled===undefined){enabled=!Bwe.isScrollable}
if(enabled){if(window.removeEventListener)
window.removeEventListener('DOMMouseScroll',Bwe.preventDefault,!1);window.onmousewheel=document.onmousewheel=null;window.onwheel=null;window.ontouchmove=null;document.onkeydown=null}
else{if(window.addEventListener)
window.addEventListener('DOMMouseScroll',Bwe.preventDefault,!1);window.onwheel=Bwe.preventDefault;window.onmousewheel=document.onmousewheel=Bwe.preventDefault;window.ontouchmove=Bwe.preventDefault;document.onkeydown=Bwe.preventDefaultForScrollKeys}
Bwe.isScrollable=enabled}
static preventDefault(e){e=e||window.event;if(e.preventDefault)
e.preventDefault();e.returnValue=!1}
static preventDefaultForScrollKeys(e){if(Bwe.scrollKeys[e.keyCode]){preventDefault(e);return!1}}}
Bwe.isScrollable=!0;Bwe.scrollKeys={37:1,38:1,39:1,40:1}
